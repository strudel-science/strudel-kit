"use strict";(self.webpackChunkstrudel_docs=self.webpackChunkstrudel_docs||[]).push([[8809],{4545:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});var o=a(4848),n=a(8453);const i={title:"Connecting Data"},s=void 0,r={id:"customization/connecting-data",title:"Connecting Data",description:"Configuring Data Sources",source:"@site/docs/customization/connecting-data.md",sourceDirName:"customization",slug:"/customization/connecting-data",permalink:"/strudel-kit/docs/customization/connecting-data",draft:!1,unlisted:!1,editUrl:"https://github.com/strudel-science/strudel-kit/tree/main/docs/docs/customization/connecting-data.md",tags:[],version:"current",frontMatter:{title:"Connecting Data"},sidebar:"mainSidebar",previous:{title:"Project Structure",permalink:"/strudel-kit/docs/getting-started/project-structure"},next:{title:"Combining Sections",permalink:"/strudel-kit/docs/customization/combine-sections"}},c={},d=[{value:"Configuring Data Sources",id:"configuring-data-sources",level:2},{value:"What should my data look like?",id:"what-should-my-data-look-like",level:2},{value:"Adding an additional data source",id:"adding-an-additional-data-source",level:2}];function l(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"configuring-data-sources",children:"Configuring Data Sources"}),"\n",(0,o.jsx)(t.p,{children:"Each Task Flow has at least one set of data that is incorporated into the flow\u2019s UI. These data sources are pulled in through custom React hooks that fetch data from external files. For example, here is how a data source is pulled in for the Monitor Activities Task Flow:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",metastring:'title="monitor-activities/index.tsx"',children:"const experiments = useDataFromSource('dummy-data/experiments.json');\n"})}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"useDataFromSource"})," hook fetches data from an external JSON, CSV, or TSV file. If supplied a local path (instead of a full URL), this hook will look for data in the ",(0,o.jsx)(t.code,{children:"public/"})," directory. If you want to add your own data file, you can drop it in the ",(0,o.jsx)(t.code,{children:"public/data/"})," folder and change the source in the hook:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"const experiments = useDataFromSource('data/my_data.json');\n"})}),"\n",(0,o.jsx)(t.p,{children:"If the source value is a URL, that means the dataset is accessed online or through an API."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"const experiments = useDataFromSource(\n  'https://pokeapi.co/api/v2/pokemon-species/'\n);\n"})}),"\n",(0,o.jsxs)(t.p,{children:["If this is the case, it\u2019s expected that your data are returned in JSON format. Accessing data through an API that requires an API key currently requires editing the ",(0,o.jsx)(t.code,{children:"fetchData"})," utility method to include the key in the fetch options. Better support for authenticated APIs may come at a later date."]}),"\n",(0,o.jsx)(t.h2,{id:"what-should-my-data-look-like",children:"What should my data look like?"}),"\n",(0,o.jsxs)(t.p,{children:["The expected shape of your data depends on where it is being used in the Task Flow. For example, if your data is populating a table, it should be a flat list of tabular data in JSON, CSV, or TSV format. If your data is populating a chart, such as in the Run Computation Task Flow, your data will need to be shaped according to the chart type and ",(0,o.jsx)(t.a,{href:"https://plotly.com/javascript/reference/index/",children:"PlotlyJS specs"}),". You can see examples for each out-of-the-box data shape inside the ",(0,o.jsx)(t.code,{children:"public/dummy-data"})," folder."]}),"\n",(0,o.jsxs)(t.p,{children:["In some cases, such as in the Search Data Repositories Task Flow, it is expected out-of-the-box that your data has certain fields in it to render certain properties and their values in the UI. You can change which properties are rendered in the UI by changing the values in the templates themselves. For example, the detail page of Search Data Repositories (",(0,o.jsx)(t.code,{children:"search-data-repositories/$id.tsx"}),") expects there to be a property called \u201ccitation\u201d to render inside the top panel."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",metastring:'title="[id].tsx"',children:'<Box flex={1}>\n  <Typography variant="h6" component="h2" mb={1}>\n    Citation\n  </Typography>\n  <Typography>{data.citation}</Typography>\n</Box>\n'})}),"\n",(0,o.jsxs)(t.p,{children:["You can change the property being pulled by changing text after \u201c",(0,o.jsx)(t.code,{children:"data."}),"\u201d. For example, if the property was named \u201ccitation_custom\u201d it would look like this:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",metastring:'title="[id].tsx"',children:'<Box flex={1}>\n  <Typography variant="h6" component="h2" mb={1}>\n    Citation\n  </Typography>\n  <Typography>{data.citation_custom}</Typography>\n</Box>\n'})}),"\n",(0,o.jsx)(t.h2,{id:"adding-an-additional-data-source",children:"Adding an additional data source"}),"\n",(0,o.jsxs)(t.p,{children:["Sometimes you may want to add an additional piece of data to your Task Flow that isn\u2019t already part of the configuration. Maybe you are adding another table or chart to the UI, or perhaps you are pulling in a dynamic title value. To do this, you will need to add a new data fetching hook to the part of the template that you want the data. For example, if you want to fetch a new set of data in the PreviewPanel of the Explore Data Task Flow, you can add a new instance of the ",(0,o.jsx)(t.code,{children:"useDataFromSource"})," hook in ",(0,o.jsx)(t.code,{children:"-components/PreviewPanel.tsx"}),"."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",metastring:'title="PreviewPanel.tsx"',children:"export const PreviewPanel: React.FC<PreviewPanelProps> = ({\n  previewItem,\n  onClose,\n}) => {\n  const newTableData = useDataFromSource('data/my_new_data.csv')\n  ...\n"})}),"\n",(0,o.jsxs)(t.p,{children:["In addition to the data fetching hooks included in the library, you are free to fetch data inside of any component using any method supported by JavaScript. Under the hood, these templates use the ",(0,o.jsx)(t.a,{href:"https://tanstack.com/query/latest/docs/framework/react/overview",children:"react-query"})," library and their ",(0,o.jsx)(t.a,{href:"https://tanstack.com/query/latest/docs/framework/react/guides/queries",children:"useQuery"})," hook. You may find it useful to use this library directly inside a template. Additionally, you could use the native ",(0,o.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch",children:"fetch API"})," to get your data."]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>r});var o=a(6540);const n={},i=o.createContext(n);function s(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);