"use strict";(self.webpackChunkstrudel_docs=self.webpackChunkstrudel_docs||[]).push([[2953],{3959:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var n=a(4848),o=a(8453);const i={title:"Connecting Data"},s=void 0,r={id:"guides/connecting-data",title:"Connecting Data",description:"Configuring Data Sources",source:"@site/docs/guides/connecting-data.md",sourceDirName:"guides",slug:"/guides/connecting-data",permalink:"/strudel-kit/docs/guides/connecting-data",draft:!1,unlisted:!1,editUrl:"https://github.com/strudel-science/strudel-kit/tree/main/docs/docs/guides/connecting-data.md",tags:[],version:"current",frontMatter:{title:"Connecting Data"},sidebar:"mainSidebar",previous:{title:"First Steps",permalink:"/strudel-kit/docs/getting-started/first-steps"},next:{title:"Combining Sections",permalink:"/strudel-kit/docs/guides/combine-sections"}},d={},c=[{value:"Configuring Data Sources",id:"configuring-data-sources",level:2},{value:"What should my data look like?",id:"what-should-my-data-look-like",level:2},{value:"Adding an additional data source",id:"adding-an-additional-data-source",level:2}];function l(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"configuring-data-sources",children:"Configuring Data Sources"}),"\n",(0,n.jsxs)(t.p,{children:["Each Task Flow has at least one set of data that is incorporated into the flow\u2019s UI. Each dataset that is currently populated by a data file will have a corresponding entry in the data section of that Task Flow\u2019s ",(0,n.jsx)(t.code,{children:"taskflow.config.ts"})," file. For example, the Compare Data Task Flow has one data entry called ",(0,n.jsx)(t.code,{children:"items"}),". This defines data for the main table on the first page of the Task Flow."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:'title="taskflow.config.ts"',children:"{\n  ...\n  data: {\n    items: {\n      /**\n       * Source of the data for the initial list of items.\n       */\n      source: 'data/default/compare-data/scenarios.json',\n      /**\n       * Field name for the unique ID in the data source.\n       */\n      idField: 'id',\n    },\n  },\n  ...\n}\n"})}),"\n",(0,n.jsxs)(t.p,{children:["A data entry in ",(0,n.jsx)(t.code,{children:"taskflow.config.ts"})," will consist of two properties: ",(0,n.jsx)(t.code,{children:"source"})," and ",(0,n.jsx)(t.code,{children:"idField"}),". The ",(0,n.jsx)(t.code,{children:"source"})," is a path or URL to the dataset. If the value is a path, that means the dataset is stored locally inside the app in the ",(0,n.jsx)(t.code,{children:"public"})," folder. If you want to use your own data file, simply drop the file inside the ",(0,n.jsx)(t.code,{children:"public"})," folder (it would be best to drop it somewhere in ",(0,n.jsx)(t.code,{children:"public/data"}),"). This file can be a CSV, TSV, or JSON file. If the source value is a URL, that means the dataset is accessed online or through an API. If this is the case, it\u2019s expected that your data are returned in JSON format. Accessing data through an API that requires an API key currently requires editing the ",(0,n.jsx)(t.code,{children:"fetchData"})," utility method to include the key in the fetch options. Better support for authenticated APIs may come at a later date."]}),"\n",(0,n.jsx)(t.h2,{id:"what-should-my-data-look-like",children:"What should my data look like?"}),"\n",(0,n.jsxs)(t.p,{children:["The expected shape of your data depends on where it is being used in the Task Flow. For example, if your data is populating a table, it should be a flat list of tabular data in JSON, CSV, or TSV format. If your data is populating a chart, such as in the Run Computation Task Flow, your data will need to be shaped according to the chart type and ",(0,n.jsx)(t.a,{href:"https://plotly.com/javascript/reference/index/",children:"PlotlyJS specs"}),". You can see examples for each out-of-the-box data shape inside the ",(0,n.jsx)(t.code,{children:"public/data/default"})," folder."]}),"\n",(0,n.jsxs)(t.p,{children:["In some cases, such as in the Search Data Repositories Task Flow, it is expected out-of-the-box that your data has certain fields in it to render certain properties and their values in the UI. If the properties aren\u2019t configurable in the ",(0,n.jsx)(t.code,{children:"taskflow.config.ts"})," file, you can always change which properties are rendered in the UI by changing the values in the templates themselves. For example, the detail page of Search Data Repositories (",(0,n.jsx)(t.code,{children:"[id].tsx"}),") expects there to be a property called \u201ccitation\u201d to render inside the top panel."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-jsx",metastring:'title="[id].tsx"',children:'<Box flex={1}>\n  <Typography variant="h6" component="h2" mb={1}>\n    Citation\n  </Typography>\n  <Typography>{data.citation}</Typography>\n</Box>\n'})}),"\n",(0,n.jsxs)(t.p,{children:["You can change the property being pulled by changing text after \u201c",(0,n.jsx)(t.code,{children:"data."}),"\u201d. For example, if the property was named \u201ccitation_custom\u201d it would look like this:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-jsx",metastring:'title="[id].tsx"',children:'<Box flex={1}>\n  <Typography variant="h6" component="h2" mb={1}>\n    Citation\n  </Typography>\n  <Typography>{data.citation_custom}</Typography>\n</Box>\n'})}),"\n",(0,n.jsx)(t.h2,{id:"adding-an-additional-data-source",children:"Adding an additional data source"}),"\n",(0,n.jsxs)(t.p,{children:["Sometimes you may want to add an additional piece of data to your Task Flow that isn\u2019t already part of the configuration. Maybe you are adding another table or chart to the UI, or perhaps you are pulling in a dynamic title value. To do this, you will need to add a new data fetching hook to the part of the template that you want the data. For example, if you want to fetch a new set of data in the PreviewPanel of the Explore Data Task Flow, you can add a new instance of the ",(0,n.jsx)(t.code,{children:"useDataFromSource"})," hook in ",(0,n.jsx)(t.code,{children:"_components/PreviewPanel.tsx"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-ts",metastring:'title="PreviewPanel.tsx"',children:"export const PreviewPanel: React.FC<PreviewPanelProps> = ({\n  previewItem,\n  onClose,\n}) => {\n  const columns = taskflow.pages.index.tableColumns;\n  const dataIdField = taskflow.data.list.idField;\n  const newTableData = useDataFromSource('data/my_new_data.csv')\n  ...\n"})}),"\n",(0,n.jsxs)(t.p,{children:["To be consistent, you could add this data source as a new entry in your ",(0,n.jsx)(t.code,{children:"taskflow.config.ts"})," file and reference the data source from the config rather than a raw string."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-ts",children:"const newTableData = useDataFromSource(taskflow.data.newTable.source);\n"})}),"\n",(0,n.jsxs)(t.p,{children:["In addition to the data fetching hooks included in the library, you are free to fetch data inside of any component using any method supported by JavaScript. Under the hood, these templates use the ",(0,n.jsx)(t.a,{href:"https://tanstack.com/query/latest/docs/framework/react/overview",children:"react-query"})," library and their ",(0,n.jsx)(t.a,{href:"https://tanstack.com/query/latest/docs/framework/react/guides/queries",children:"useQuery"})," hook. You may find it useful to use this library directly inside a template. Additionally, you could use the native ",(0,n.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch",children:"fetch API"})," to get your data."]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>r});var n=a(6540);const o={},i=n.createContext(o);function s(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);