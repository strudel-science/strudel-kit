import{d as n,j as p,R as C}from"./index-BnbdzBXK.js";var o=(e=>(e.SET_DATA="SET_DATA",e.SET_SELECTED_ROWS="SET_SELECTED_ROWS",e.SET_COMPARISON_DATA="SET_COMPARISON_DATA",e.SET_COMPARING="SET_COMPARING",e))(o||{});const T=e=>({type:"SET_DATA",payload:e}),h=e=>({type:"SET_SELECTED_ROWS",payload:e}),_=(e,a)=>({type:"SET_COMPARISON_DATA",payload:{data:e,columns:a}}),O=e=>({type:"SET_COMPARING",payload:e}),l=C.createContext(void 0),R={data:[],columns:[],selectedRows:[],dataIdField:"id",comparing:!1,comparisonData:[],comparisonColumns:[]},A=(e,a)=>{const{children:r,...c}=a;return{...e,...c}};function D(e,a){switch(a.type){case o.SET_DATA:return{...e,data:a.payload};case o.SET_SELECTED_ROWS:return{...e,selectedRows:a.payload};case o.SET_COMPARISON_DATA:return{...e,comparisonData:a.payload.data,comparisonColumns:a.payload.columns};case o.SET_COMPARING:return{...e,comparing:a.payload};default:throw new Error(`Unhandled action type: ${a.type}`)}}const w=e=>{const[a,r]=n.useReducer(D,A(R,e)),c={state:a,dispatch:r};return n.useEffect(()=>{e.data&&r(T(e.data))},[e.data]),n.useEffect(()=>{if(a.comparing&&a.selectedRows.length>1){const m=a.columns.filter(t=>t.isComparisonMetric),E=a.data.filter(t=>a.selectedRows.indexOf(t.id)>-1),i=[{field:"metric",headerName:"Metric",width:200,cellClassName:"compare-data--metric"}],u=m.map((t,S)=>{const d={};return d.metric=t.headerName,E.forEach(s=>{d[s.name]=s[t.field],S===0&&i.push({field:s.name,headerName:s.name,width:200})}),d});r(_(u,i))}},[a.comparing]),p.jsx(l.Provider,{value:c,children:e.children})},y=()=>{const e=n.useContext(l);if(e===void 0)throw new Error("useCompareData must be used within an CompareDataProvider");return e};export{w as C,O as a,h as s,y as u};
