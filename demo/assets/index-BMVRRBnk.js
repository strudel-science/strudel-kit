import{g as X,a as Y,_ as q,u as ca,b as h,c as Z,j as t,d as C,e as aa,f as da,s as A,h as T,i as _,k as ea,l as pa,m as O,n as ta,o as sa,p as oa,q as ia,S as $,t as ua,B as f,T as p,A as w,P as na,v as E,w as ga,x as xa,L as fa}from"./index-BnbdzBXK.js";import{F as ha,u as va,a as ba}from"./FilterField-DMAwM7NW.js";import{P as ma}from"./PageHeader-CKP0FpY7.js";import{F as ja,u as ya,f as Ca}from"./useListQuery-DM3AgyLb.js";import{L as U,F as V,S as Pa,D as $a}from"./DataGrid-7_aY7HQM.js";import{A as ka,C as za}from"./Close-CboXMYl2.js";import"./DatePicker-DlBHUqmU.js";import"./DateCalendar-CcXKUi8d.js";import"./colorManipulator-C1WzupPi.js";import"./useQuery-cPuHdkqq.js";import"./useGridRootProps-DJPnk36p.js";import"./MenuItem-yplfTefj.js";import"./dividerClasses-CuUekTT4.js";import"./Divider-D-hCgmGu.js";function Ra(a){return X("MuiPagination",a)}Y("MuiPagination",["root","ul","outlined","text"]);const Fa=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Sa(a={}){const{boundaryCount:e=1,componentName:s="usePagination",count:o=1,defaultPage:l=1,disabled:u=!1,hideNextButton:v=!1,hidePrevButton:n=!1,onChange:b,page:g,showFirstButton:P=!1,showLastButton:B=!1,siblingCount:k=1}=a,x=q(a,Fa),[r,I]=ca({controlled:g,default:l,name:s,state:"page"}),R=(i,d)=>{g||I(d),b&&b(i,d)},m=(i,d)=>{const S=d-i+1;return Array.from({length:S},(ee,la)=>i+la)},F=m(1,Math.min(e,o)),j=m(Math.max(o-e+1,e+1),o),M=Math.max(Math.min(r-k,o-e-k*2-1),e+2),c=Math.min(Math.max(r+k,e+k*2+2),j.length>0?j[0]-2:o-1),N=[...P?["first"]:[],...n?[]:["previous"],...F,...M>e+2?["start-ellipsis"]:e+1<o-e?[e+1]:[],...m(M,c),...c<o-e-1?["end-ellipsis"]:o-e>e?[o-e]:[],...j,...v?[]:["next"],...B?["last"]:[]],L=i=>{switch(i){case"first":return 1;case"previous":return r-1;case"next":return r+1;case"last":return o;default:return null}},z=N.map(i=>typeof i=="number"?{onClick:d=>{R(d,i)},type:"page",page:i,selected:i===r,disabled:u,"aria-current":i===r?"true":void 0}:{onClick:d=>{R(d,L(i))},type:i,page:L(i),selected:!1,disabled:u||i.indexOf("ellipsis")===-1&&(i==="next"||i==="last"?r>=o:r<=1)});return h({items:z},x)}function Ba(a){return X("MuiPaginationItem",a)}const y=Y("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),G=Z(t.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),H=Z(t.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Ia=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],ra=(a,e)=>{const{ownerState:s}=a;return[e.root,e[s.variant],e[`size${_(s.size)}`],s.variant==="text"&&e[`text${_(s.color)}`],s.variant==="outlined"&&e[`outlined${_(s.color)}`],s.shape==="rounded"&&e.rounded,s.type==="page"&&e.page,(s.type==="start-ellipsis"||s.type==="end-ellipsis")&&e.ellipsis,(s.type==="previous"||s.type==="next")&&e.previousNext,(s.type==="first"||s.type==="last")&&e.firstLast]},Ma=a=>{const{classes:e,color:s,disabled:o,selected:l,size:u,shape:v,type:n,variant:b}=a,g={root:["root",`size${_(u)}`,b,v,s!=="standard"&&`color${_(s)}`,s!=="standard"&&`${b}${_(s)}`,o&&"disabled",l&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[n]],icon:["icon"]};return ea(g,Ba,e)},La=A("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:ra})(({theme:a,ownerState:e})=>h({},a.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,height:"auto",[`&.${y.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity}},e.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:a.typography.pxToRem(15)})),Na=A(pa,{name:"MuiPaginationItem",slot:"Root",overridesResolver:ra})(({theme:a,ownerState:e})=>h({},a.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,[`&.${y.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${y.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},transition:a.transitions.create(["color","background-color"],{duration:a.transitions.duration.short}),"&:hover":{backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.selected}`]:{backgroundColor:(a.vars||a).palette.action.selected,"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:O.alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(a.vars||a).palette.action.selected}},[`&.${y.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:O.alpha(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},[`&.${y.disabled}`]:{opacity:1,color:(a.vars||a).palette.action.disabled,backgroundColor:(a.vars||a).palette.action.selected}}},e.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:a.typography.pxToRem(15)},e.shape==="rounded"&&{borderRadius:(a.vars||a).shape.borderRadius}),({theme:a,ownerState:e})=>h({},e.variant==="text"&&{[`&.${y.selected}`]:h({},e.color!=="standard"&&{color:(a.vars||a).palette[e.color].contrastText,backgroundColor:(a.vars||a).palette[e.color].main,"&:hover":{backgroundColor:(a.vars||a).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[e.color].main}},[`&.${y.focusVisible}`]:{backgroundColor:(a.vars||a).palette[e.color].dark}},{[`&.${y.disabled}`]:{color:(a.vars||a).palette.action.disabled}})},e.variant==="outlined"&&{border:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${y.selected}`]:h({},e.color!=="standard"&&{color:(a.vars||a).palette[e.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / 0.5)`:O.alpha(a.palette[e.color].main,.5)}`,backgroundColor:a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / ${a.vars.palette.action.activatedOpacity})`:O.alpha(a.palette[e.color].main,a.palette.action.activatedOpacity),"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:O.alpha(a.palette[e.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:O.alpha(a.palette[e.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity)}},{[`&.${y.disabled}`]:{borderColor:(a.vars||a).palette.action.disabledBackground,color:(a.vars||a).palette.action.disabled}})})),Oa=A("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(a,e)=>e.icon})(({theme:a,ownerState:e})=>h({fontSize:a.typography.pxToRem(20),margin:"0 -8px"},e.size==="small"&&{fontSize:a.typography.pxToRem(18)},e.size==="large"&&{fontSize:a.typography.pxToRem(22)})),_a=C.forwardRef(function(e,s){const o=aa({props:e,name:"MuiPaginationItem"}),{className:l,color:u="standard",component:v,components:n={},disabled:b=!1,page:g,selected:P=!1,shape:B="circular",size:k="medium",slots:x={},type:r="page",variant:I="text"}=o,R=q(o,Ia),m=h({},o,{color:u,disabled:b,selected:P,shape:B,size:k,type:r,variant:I}),F=da(),j=Ma(m),c=(F?{previous:x.next||n.next||H,next:x.previous||n.previous||G,last:x.first||n.first||V,first:x.last||n.last||U}:{previous:x.previous||n.previous||G,next:x.next||n.next||H,first:x.first||n.first||V,last:x.last||n.last||U})[r];return r==="start-ellipsis"||r==="end-ellipsis"?t.jsx(La,{ref:s,ownerState:m,className:T(j.root,l),children:"â€¦"}):t.jsxs(Na,h({ref:s,ownerState:m,component:v,disabled:b,className:T(j.root,l)},R,{children:[r==="page"&&g,c?t.jsx(Oa,{as:c,ownerState:m,className:j.icon}):null]}))}),Da=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Wa=a=>{const{classes:e,variant:s}=a;return ea({root:["root",s],ul:["ul"]},Ra,e)},Aa=A("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(a,e)=>{const{ownerState:s}=a;return[e.root,e[s.variant]]}})({}),Ea=A("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(a,e)=>e.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Ta(a,e,s){return a==="page"?`${s?"":"Go to "}page ${e}`:`Go to ${a} page`}const wa=C.forwardRef(function(e,s){const o=aa({props:e,name:"MuiPagination"}),{boundaryCount:l=1,className:u,color:v="standard",count:n=1,defaultPage:b=1,disabled:g=!1,getItemAriaLabel:P=Ta,hideNextButton:B=!1,hidePrevButton:k=!1,renderItem:x=z=>t.jsx(_a,h({},z)),shape:r="circular",showFirstButton:I=!1,showLastButton:R=!1,siblingCount:m=1,size:F="medium",variant:j="text"}=o,M=q(o,Da),{items:c}=Sa(h({},o,{componentName:"Pagination"})),N=h({},o,{boundaryCount:l,color:v,count:n,defaultPage:b,disabled:g,getItemAriaLabel:P,hideNextButton:B,hidePrevButton:k,renderItem:x,shape:r,showFirstButton:I,showLastButton:R,siblingCount:m,size:F,variant:j}),L=Wa(N);return t.jsx(Aa,h({"aria-label":"pagination navigation",className:T(L.root,u),ownerState:N,ref:s},M,{children:t.jsx(Ea,{className:L.ul,ownerState:N,children:c.map((z,i)=>t.jsx("li",{children:x(h({},z,{color:v,"aria-label":P(z.type,z.page,z.selected),shape:r,size:F,variant:j}))},i))})}))}),qa=({filterConfigs:a,onClose:e})=>t.jsx(ja,{grouped:!1,onClose:e,sx:{border:"none"},children:a.map((s,o)=>t.jsx(ha,{field:s.field,label:s.label,operator:"contains",filterComponent:s.filterComponent,filterProps:s.filterProps},`${s.field}-${o}`))});var D={},J;function Ua(){if(J)return D;J=1;var a=ta();Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var e=a(sa()),s=oa();return D.default=(0,e.default)((0,s.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt"),D}var Va=Ua();const Ga=ia(Va);var W={},Q;function Ha(){if(Q)return W;Q=1;var a=ta();Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var e=a(sa()),s=oa();return W.default=(0,e.default)((0,s.jsx)("path",{d:"M3 18h6v-2H3zM3 6v2h18V6zm0 7h12v-2H3z"}),"Sort"),W}var Ja=Ha();const Qa=ia(Ja),Ka=({item:a,previewItem:e,setPreviewItem:s})=>{const o=()=>{s(a)};return t.jsxs($,{className:(e==null?void 0:e.id)===a.id?"selected":"","data-testid":"sdr-data-list-card",direction:"row",onClick:()=>o(),sx:{padding:1,transition:"0.25s","&:hover":{bgcolor:"neutral.light"},"&.selected":{bgcolor:ua[50]}},children:[t.jsx(f,{sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"neutral.dark",height:70,width:70},children:t.jsx(p,{fontSize:"small",children:"<Image>"})}),t.jsxs(f,{flex:1,children:[t.jsx(p,{sx:{color:"primary.main",fontWeight:"bold"},children:t.jsx(w,{to:"/search-data-repositories/$id",params:{id:a.id},underline:"hover",children:a.title})}),a.summary&&t.jsx(p,{sx:{WebkitBoxOrient:"vertical",WebkitLineClamp:"2",display:"-webkit-box",overflow:"hidden"},children:a.summary}),a.tags&&t.jsx(p,{sx:{WebkitBoxOrient:"vertical",WebkitLineClamp:"1",display:"-webkit-box",fontStyle:"italic",overflow:"hidden"},children:a.tags.map((l,u)=>u<a.tags.length-1?t.jsxs(p,{component:"span",sx:{fontSize:"small",marginRight:.5},children:[l,","]},`${l}-${u}`):t.jsx(p,{component:"span",sx:{fontSize:"small"},children:l},`${l}-${u}`))})]})]})},Xa=({filterConfigs:a,onToggleFiltersPanel:e,previewItem:s,setPreviewItem:o})=>{const{activeFilters:l}=va(),[u,v]=C.useState(""),[n,b]=C.useState(1),g=10,[P,B]=C.useState((n-1)*g),[k,x]=C.useState(1),[r,I]=C.useState([]),R="client",{isPending:m,isError:F,data:j,error:M}=ya({activeFilters:l,dataSource:"dummy-data/datasets.json",filterConfigs:a,offset:P,pageSize:g,queryMode:R,staticParams:null}),c=Ca(j,l,a,u),L=new Array(g).fill(null).map((d,S)=>S),z=d=>{v(d.target.value)},i=(d,S)=>{b(S)};return C.useEffect(()=>{c&&x(c.length)},[c]),C.useEffect(()=>{B((n-1)*g)},[n]),C.useEffect(()=>{c&&I(c.filter((d,S)=>S>=P&&S<P+g))},[c,P]),t.jsxs(na,{elevation:0,children:[t.jsxs($,{direction:"row",spacing:2,alignItems:"center",sx:{padding:2},children:[t.jsx(E,{startIcon:t.jsx(Ga,{}),onClick:e,children:"Filters"}),t.jsx(E,{startIcon:t.jsx(Qa,{}),children:"Sort"}),t.jsx(f,{flex:1,children:t.jsx(ga,{variant:"outlined",label:"Search",size:"small",value:u,fullWidth:!0,onChange:z})})]}),t.jsxs($,{direction:"row",sx:{padding:2},children:[m&&t.jsx(f,{flex:1,sx:{padding:2},children:L.map(d=>t.jsx(Pa,{height:100},d))}),F&&t.jsx($,{flex:1,children:t.jsx(ka,{severity:"error",children:M.message})}),c&&c.length>0&&t.jsx($,{flex:1,children:r==null?void 0:r.map(d=>t.jsx(Ka,{item:d,previewItem:s,setPreviewItem:o},d.id))}),c&&c.length===0&&t.jsx($,{flex:1,children:t.jsx(p,{children:"No data matches your search"})}),!s&&t.jsx(f,{sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"neutral.dark",height:700,width:400},children:t.jsx(p,{children:"<Map>"})})]}),t.jsx(wa,{count:Math.ceil(k/g),page:n,onChange:i,sx:{padding:2}})]})},Ya=[{field:"file_name",headerName:"File Name",flex:1},{field:"file_size",headerName:"Size",type:"number",width:150}],Za=[{file_name:"file1.csv",file_size:"15 MB"},{file_name:"file2.json",file_size:"117 MB"},{file_name:"file3.json",file_size:"4 MB"}],ae=({previewItem:a,onClose:e})=>t.jsx(na,{elevation:0,sx:{height:"100%",padding:2},children:t.jsxs($,{spacing:3,children:[t.jsxs($,{spacing:1,children:[t.jsxs($,{direction:"row",children:[t.jsx(p,{variant:"h6",component:"h3",flex:1,children:t.jsx(w,{to:"/search-data-repositories/$id",params:{id:a.id},underline:"hover",children:a.title})}),t.jsx(xa,{size:"small",onClick:e,children:t.jsx(za,{})})]}),t.jsx(p,{variant:"body2",children:"(Optional) Entity description or helper text."})]}),t.jsxs(f,{children:[t.jsx(p,{fontWeight:"medium",mb:1,children:"Dates"}),t.jsx(fa,{rows:[{label:"Publication Date",value:"2019-01-01"},{label:"Start Date",value:"2019-01-01"},{label:"End Date",value:"2019-01-01"}]})]}),t.jsxs(f,{children:[t.jsx(p,{fontWeight:"medium",mb:1,children:"Citation"}),t.jsx(p,{children:"Labore proident do aute et esse adipisicing veniam eiusmod culpa pariatur sunt officia."})]}),a.summary&&t.jsxs(f,{children:[t.jsx(p,{fontWeight:"medium",mb:1,children:"Summary"}),t.jsx(p,{children:a.summary})]}),a.tags&&t.jsxs(f,{children:[t.jsx(p,{fontWeight:"medium",mb:1,children:"Tags"}),t.jsx(p,{children:a.tags.map((s,o)=>a.tags&&o<a.tags.length-1?t.jsx("span",{children:`${s}, `},`${s}-${o}`):t.jsx("span",{children:s},`${s}-${o}`))})]}),t.jsxs(f,{children:[t.jsx(p,{fontWeight:"medium",mb:1,children:"Attached Files"}),t.jsx($a,{getRowId:s=>s.file_name,rows:Za,columns:Ya,disableRowSelectionOnClick:!0,initialState:{pagination:{paginationModel:{pageSize:5}}}})]}),t.jsxs($,{direction:"row",children:[t.jsx(w,{to:"/search-data-repositories/$id",params:{id:a.id},children:t.jsx(E,{variant:"contained",children:"View datasets"})}),t.jsx(E,{variant:"outlined",children:"Download files"})]})]})}),K=[{field:"category",label:"Category",operator:"contains-one-of",filterComponent:"CheckboxList",filterProps:{options:[{label:"Groundwater",value:"Groundwater"},{label:"Fires",value:"Fires"},{label:"Floods",value:"Floods"},{label:"Earthquakes",value:"Earthquakes"}]}},{field:"tags",label:"Tags",operator:"contains-one-of",filterComponent:"CheckboxList",filterProps:{options:[{label:"Boreal forest",value:"Boreal forest"},{label:"Carbon and greenhouse gas emissions",value:"Carbon and greenhouse gas emissions"},{label:"Ecology",value:"Ecology"}]}},{field:"publication_date",label:"Publication Date",operator:"between-dates-inclusive",filterComponent:"DateRange"}],he=function(){const[e,s]=C.useState(),[o,l]=C.useState(!0),u=()=>{l(!1)},v=()=>{l(!o)},n=()=>{s(null)};return t.jsx(ba,{children:t.jsxs(f,{children:[t.jsx(ma,{pageTitle:"Search Data Repositories App",description:"Description of this app section",sx:{marginBottom:1,padding:2}}),t.jsx(f,{children:t.jsxs($,{direction:"row",children:[o&&t.jsx(f,{sx:{width:"350px"},children:t.jsx(qa,{filterConfigs:K,onClose:u})}),t.jsx(f,{sx:{border:"none",flex:1,minHeight:"600px",minWidth:0},children:t.jsx(Xa,{filterConfigs:K,onToggleFiltersPanel:v,previewItem:e,setPreviewItem:s})}),e&&t.jsx(f,{sx:{maxWidth:"600px",minWidth:"400px"},children:t.jsx(ae,{previewItem:e,onClose:n})})]})})]})})};export{he as component};
